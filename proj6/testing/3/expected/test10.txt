I am thread 123...
thread 123 entering 1st CS...
in thread: resource is 11
in thread: resource is 22
thread 123 leaving 1st CS...
main thread entering CS...
in main: resource is 33
in main: resource is 77
main thread leaving CS...
main thread gives up CPU...
thread 123 entering 2nd CS...
in thread: resource is 55
in thread: resource is 66
thread 123 leaving 2nd CS...
thread 123: t_terminate()
in main: sem_destroy() and t_shutdown()